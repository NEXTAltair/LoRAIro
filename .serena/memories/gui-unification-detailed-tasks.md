# LoRAIro GUI統一化 - 詳細タスク分割

## Phase 1: FilterSearchPanel統一化 (詳細分割版)

### 🔍 **Phase 1.1: 差分分析** (1-2時間)
**目的**: 2つの実装ファイルの詳細な違いを把握
**タスク**:
- `filter.py` のFilterSearchPanel機能分析
- `filter_search_panel.py` の実装内容分析  
- 機能差分マトリックス作成
- 統合方針決定のための比較表作成

### 🏗️ **Phase 1.2: 統一アーキテクチャ設計** (1時間)
**目的**: thumbnail.pyパターンを適用した統一設計
**タスク**:
- DatasetStateManager統合パターン設計
- UI/ロジック/状態の責任分離設計
- インターフェース定義作成
- 継承関係とシグナル/スロット設計

### 🔧 **Phase 1.3: CustomRangeSlider分離準備** (30分)
**目的**: 独立コンポーネントとして再利用可能にする
**タスク**:
- CustomRangeSlider依存関係確認
- 独立性検証と必要な修正特定
- 共通ウィジェットとしての配置計画

### ⚙️ **Phase 1.4: SearchConditionBuilder設計** (1時間)
**目的**: 検索条件構築ロジックの分離
**タスク**:
- 検索条件の型定義作成
- 条件構築アルゴリズム設計
- FilterSearchPanelとの連携インターフェース設計
- DatasetStateManagerとの統合設計

### 🎨 **Phase 1.5: 統一FilterSearchPanel実装** (2-3時間)
**目的**: UIレイヤーの統一実装
**タスク**:
- 統一されたUI構造実装
- DatasetStateManager統合実装
- シグナル/スロット接続実装
- CustomRangeSlider統合実装
- レスポンシブレイアウト実装

### 🔗 **Phase 1.6: DatasetStateManager統合** (1時間)
**目的**: 状態管理の中央化
**タスク**:
- フィルター状態のDatasetStateManager統合
- 状態変更通知の実装
- フィルター条件の永続化実装
- thumbnail.pyパターンとの整合性確保

### 🏢 **Phase 1.7: MainWorkspaceWindow統合更新** (30分)
**目的**: メインウィンドウでの統合
**タスク**:
- 新FilterSearchPanelのインスタンス化
- 既存接続の更新
- シグナル/スロット接続の更新
- 互換性確認

### 🧪 **Phase 1.8: 単体テスト作成/更新** (1-2時間)
**目的**: 新実装の品質保証
**タスク**:
- FilterSearchPanel単体テスト作成
- SearchConditionBuilder単体テスト作成
- DatasetStateManager連携テスト作成
- CustomRangeSliderテスト更新

### 🔍 **Phase 1.9: 統合テスト・回帰テスト** (1時間)
**目的**: システム全体の動作確認
**タスク**:
- フィルタリング機能の統合テスト
- MainWorkspaceWindowとの連携テスト
- パフォーマンステスト実行
- 既存機能の回帰テスト実行

### 🧹 **Phase 1.10: クリーンアップ** (30分)
**目的**: 重複ファイルの除去と整理
**タスク**:
- 古いfilter.py削除（必要な部分のみ移行後）
- インポート文の更新
- 不要なコメント・コード削除
- ドキュメント更新

## ⏱️ **推定時間**
- **高優先度タスク**: 7-9時間
- **中優先度タスク**: 3-4時間  
- **低優先度タスク**: 30分
- **合計**: 10.5-13.5時間

## 🎯 **成功基準**
- [ ] 重複実装の完全解消
- [ ] DatasetStateManager統合完了
- [ ] テストカバレッジ75%以上維持
- [ ] 既存機能の100%互換性
- [ ] パフォーマンス劣化なし

## 📋 **次のフェーズ準備**
Phase 1完了後、同様の詳細分割をPhase 2（アノテーション系）、Phase 3（プレビュー系）にも適用予定。

---
**作成日**: 2025/08/02  
**総推定工数**: 10.5-13.5時間  
**並行実行可能**: Phase 1.3, 1.8の一部タスク