# データセットエクスポート機能の要件

## 実装予定機能: DatasetExportWidget

### 重要な要件
**画像エクスポート時のテキストファイル統合機能**

エクスポート機能を完成させる際、以下の機能を実装する必要がある：

#### 機能概要
- データベースから画像をエクスポートする際
- 画像と同名の `.txt` ファイルに **caption も一緒に保存する**
- データベースから直接取得するため、ファイルシステムからの読み込みは不要

#### 実装方針
- データベースに登録済みの画像データから取得
- 画像メタデータとして保存されている caption を使用
- エクスポート先ディレクトリに `{image_name}.txt` として保存
- 既存のタグと caption を統合して1つの `.txt` ファイルに出力

#### 削除された不要機能
- `ToolsStatic.join_txt_and_caption_files()` - ファイルシステムから `.caption` ファイルを読み込んで `.txt` に追加する機能
- 理由: データベース登録後にエクスポートするため、ファイルからの取得は不要

#### 関連ファイル
- 実装予定: DatasetExportWidget (未完成)
- 削除済み: `src/lorairo/utils/tools.py` の `join_txt_and_caption_files` メソッド

#### 実装時の注意点
- データベースから caption を取得するクエリを実装
- テキストファイル形式: タグとcaptionの区切り方法を検討
- エンコーディング: UTF-8で統一
