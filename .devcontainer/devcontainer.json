{
    "name": "LoRAIro Development Environment",
    "build": {
        "dockerfile": "Dockerfile",
        "args": {
            "TZ": "${localEnv:TZ:UTC}"
        }
    },
    "runArgs": [
        "--cap-add=SYS_PTRACE",
        "--security-opt",
        "seccomp=unconfined"
    ],
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/LoRAIro,type=bind,consistency=delegated",
    "workspaceFolder": "/workspaces/LoRAIro",
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance",
                "ms-python.mypy-type-checker",
                "charliermarsh.ruff",
                "njpwerner.autodocstring",
                "kawamataryo.copy-python-dotted-path",
                "seanwu.vscode-qt-for-python",
                "qwtel.sqlite-viewer",
                "tamasfe.even-better-toml",
                "mechatroner.rainbow-csv",
                "eamodio.gitlens",
                "donjayamanne.git-extension-pack",
                "codezombiech.gitignore",
                "streetsidesoftware.code-spell-checker",
                "vscode-icons-team.vscode-icons",
                "shardulm94.trailing-spaces",
                "gruntfuggly.todo-tree",
                "intellsmi.comment-translate",
                "cweijan.vscode-typora",
                "alexkrechik.cucumberautocomplete",
                "wscats.search",
                "rooveterinaryinc.roo-cline",
                "google.geminicodeassist",
                "esbenp.prettier-vscode",
                "ms-azuretools.vscode-docker",
                "masakit.zenkaku-hankaku"
            ]
        }
    },
    "remoteUser": "vscode",
    "remoteEnv": {
        "QT_QPA_PLATFORM": "offscreen",
        "DISPLAY": ":99"
    },
    "postCreateCommand": "bash -c 'grep -q \"LoRAIro venv auto-activation\" ~/.bashrc || cat >> ~/.bashrc << \"EOF\"\n\n# LoRAIro venv auto-activation\nif [ -z \"$VIRTUAL_ENV\" ] && [ -f \"/workspaces/LoRAIro/.venv/bin/activate\" ]; then\n    source /workspaces/LoRAIro/.venv/bin/activate\nfi\nEOF\n'",
    "postStartCommand": {
        "hookPermissions": "chmod +x .claude/hooks/*.sh || true",
        "install": "make install-dev"
    },
    "postAttachCommand": {
        "mcpSerena": "claude mcp add serena -- uvx --from git+https://github.com/oraios/serena serena start-mcp-server --context ide-assistant --project /workspaces/LoRAIro",
        "mcpCipher": "claude mcp add cipher -t sse http://192.168.11.2:5000/mcp/sse"
    },
    "mounts": [
        "source=lorairo-bashhistory-${devcontainerId},target=/home/vscode/.bash_history,type=volume",
        "source=lorairo-vscode-extensions-${devcontainerId},target=/home/vscode/.vscode-server/extensions,type=volume",
        "source=lorairo-venv-${devcontainerId},target=/workspaces/LoRAIro/.venv,type=volume"
    ],
    "features": {
        "ghcr.io/devcontainers/features/git:1": {
            "ppa": true,
            "version": "latest"
        }
    }
}
