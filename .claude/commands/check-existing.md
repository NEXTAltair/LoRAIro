# Check Existing Solutions

実装予定機能に対する既存ライブラリ・ツールの徹底調査コマンド（要件明確化ヒアリング付き）

## 使用方法
```
@check-existing $ARGUMENTS
```

**$ARGUMENTS**: 実装予定の機能・要件を記述（曖昧でも可）
- 例: `画像処理の何か`、`データベース関連`、`GUI widget`、`AI annotation tool`

## 実行手順

### Phase 1: 要件明確化ヒアリング

**AIAgent が以下の質問を通じて要件を明確化:**

#### 1. 基本機能の特定
- **Q**: 「具体的にどのような処理・機能を実現したいですか？」
- **Q**: 「入力は何で、出力は何を期待していますか？」
- **Q**: 「ユーザーの操作フローはどのようなものですか？」

#### 2. 技術的制約の確認
- **Q**: 「LoRAIroのどの部分（GUI/DB/AI/サービス層）に統合予定ですか？」
- **Q**: 「パフォーマンス要件はありますか？（処理速度、メモリ使用量等）」
- **Q**: 「既存のライブラリ（PySide6、SQLAlchemy等）との連携は必要ですか？」

#### 3. 規模・複雑さの把握
- **Q**: 「1回限りのツールですか？それとも再利用可能なコンポーネントですか？」
- **Q**: 「設定可能な項目やカスタマイズ性は必要ですか？」
- **Q**: 「エラーハンドリングやロギングの要件はありますか？」

#### 4. 類似機能の確認
- **Q**: 「今まで使ったことがある類似ツール・ライブラリはありますか？」
- **Q**: 「理想的には○○のような動作をして欲しい、という参考はありますか？」
- **Q**: 「避けたい実装方法や制約はありますか？」

#### 5. 優先度・重要度の整理
- **Q**: 「Must-have（必須）とNice-to-have（あると良い）を分けるとどうなりますか？」
- **Q**: 「80%の要件を満たす既存解決策があれば採用しますか？」
- **Q**: 「開発工数と保守性、どちらを重視しますか？」

### Phase 2: 要件定義書生成

ヒアリング結果を以下の形式で整理:

```markdown
## 明確化された要件定義

### 核心機能
- **メイン処理**: [具体的な処理内容]
- **入力形式**: [データ型、ファイル形式、UI操作等]
- **出力形式**: [期待する結果の形式]

### 技術的要件
- **統合箇所**: [LoRAIroのどの部分]
- **パフォーマンス**: [速度・メモリ・精度要件]
- **依存関係**: [既存ライブラリとの関係]

### 機能的要件
- **Must-have**: [絶対に必要な機能]
- **Nice-to-have**: [あると良い機能]
- **制約・除外**: [やらない/できないこと]

### 検索キーワード候補
- **メインキーワード**: [核心機能を表すキーワード]
- **技術キーワード**: [実装技術・フレームワーク関連]
- **ドメインキーワード**: [業界・分野特有の用語]
```

### Phase 3: 徹底的な既存解決策調査

明確化された要件を基に以下を実行:

#### 3.1 Python生態系調査
- **PyPI検索**: 明確化されたキーワードでの既存パッケージ検索
- **GitHub検索**: Topics、コード検索、Issue検索
- **Python標準ライブラリ**: 標準機能での実現可能性

#### 3.2 Web検索・情報収集（WebSearch/MCP活用）
- **技術ブログ**: 明確化された要件での実装例検索
- **Stack Overflow**: 具体的な技術的課題での解決策
- **GitHub Issues**: 類似要件での議論・解決策
- **公式ドキュメント**: 関連ライブラリの機能確認

#### 3.3 LoRAIro環境調査
- **現在の依存関係**: `uv list` での既存ライブラリ機能確認
- **local_packages**: genai-tag-db-tools、image-annotator-lib での提供機能
- **既存実装**: src/lorairo/ での類似機能実装状況

### Phase 4: 適合性評価・推奨事項

```markdown
# 既存解決策調査結果 ({機能名}_{YYYYMMDD_HHMMSS}.md)

## ヒアリング結果
[Phase 2で生成された要件定義書]

## 発見された既存解決策

### 🎯 完全代替可能（要件適合度90%以上）
- **ライブラリ名**: [具体的な適合理由]
- **統合方法**: [LoRAIroへの組み込み手順]
- **推奨度**: ⭐⭐⭐⭐⭐

### 🔧 組み合わせ利用（要件適合度60-89%）
- **主ライブラリ**: [メイン機能提供]
- **補完方法**: [不足機能の補完策]
- **実装工数**: [予想される作業量]

### 📚 参考実装（要件適合度30-59%）
- **参考価値**: [学習・応用可能な要素]
- **独自実装**: [必要な追加開発範囲]

## 最終推奨事項

### ✅ 採用推奨解決策
- **選択理由**: [客観的評価根拠]
- **統合手順**: [具体的な導入ステップ]
- **注意点**: [制限事項・考慮点]

### ⚠️ 独自実装必要性
- **理由**: [既存解決策の限界・不足]
- **最小実装範囲**: [本当に必要な独自開発部分]
- **既存活用**: [部分的に使える機能・ライブラリ]
```

## 実行例

```
User: @check-existing 画像処理の何か
AI: 画像処理について詳しく教えてください。具体的にどのような処理を実現したいですか？
    - 画像の変換・フィルタリング？
    - メタデータ抽出・分析？
    - AI による画像認識・分類？
    - ファイル形式変換？
    - その他？

User: AIで画像の内容を解析して説明文を生成したい
AI: AI画像解析について詳しく確認させてください...
    [ヒアリング継続 → 要件明確化 → 調査実行]
```

このアプローチにより、曖昧な要求から始まっても最終的に的確な既存解決策を発見できます。