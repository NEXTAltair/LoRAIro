{
  "blocked_commands": [
    {
      "pattern": "^pip ",
      "reason": "Use 'uv' instead of pip",
      "suggestion": "uv add <package>"
    },
    {
      "pattern": "^npm ",
      "reason": "Python project",
      "suggestion": "uv for Python"
    },
    {
      "pattern": "^git push.*origin.*main",
      "reason": "Direct push to main restricted",
      "suggestion": "Create feature branch and PR"
    },
    {
      "pattern": "^rm\\s+-rf\\s+.+",
      "reason": "Destructive operation",
      "suggestion": "make clean or confirm with user"
    },
    {
      "pattern": "cd.*local_packages/[^/]+.*[;&].*uv run",
      "reason": "Creates separate .venv in local package",
      "suggestion": "Run from project root: uv run pytest local_packages/<pkg>/tests/"
    }
  ],
  "makefile_transforms": [
    {
      "pattern": "^pytest\\b",
      "transform": "make test",
      "description": "Use Makefile test target"
    },
    {
      "pattern": "^uv run pytest\\b(?!.*local_packages)",
      "transform": "make test",
      "description": "Use Makefile test target"
    },
    {
      "pattern": "^(uv run )?ruff (format|check).*src/.*tests/",
      "transform": "make format",
      "description": "Use Makefile format target"
    },
    {
      "pattern": "^(uv run )?mypy -p lorairo",
      "transform": "make mypy",
      "description": "Use Makefile mypy target"
    }
  ],
  "uv_transforms": [
    {
      "pattern": "^pytest\\s+local_packages/",
      "transform": "s/^pytest/uv run pytest/",
      "description": "Local package tests need uv run"
    },
    {
      "pattern": "^python\\s+",
      "transform": "s/^python/uv run python/",
      "description": "Use uv run for python"
    },
    {
      "pattern": "^ruff\\s+(check|format)(?!.*src/.*tests/)",
      "transform": "s/^ruff/uv run ruff/",
      "description": "Single file ruff needs uv run"
    },
    {
      "pattern": "^mypy(?! -p lorairo)",
      "transform": "s/^mypy/uv run mypy/",
      "description": "Custom mypy needs uv run"
    }
  ],
  "description": "LoRAIro command control - Makefile優先、uv run変換、危険コマンドブロック"
}
